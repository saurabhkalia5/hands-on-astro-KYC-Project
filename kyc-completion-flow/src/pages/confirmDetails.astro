---
import KycFlowLayout from "../layouts/KycFlowLayout.astro";
import { getCollection } from "astro:content";

const user = await getCollection("user");
const currentUser = user[0];

---

<KycFlowLayout>
  <form method="post" action="/api/users" class="container">
    <!-- User Details -->
    <div class="card">
      <div class="card-header">
        User Details <span class="edit">Edit</span>
      </div>
      <div class="card-content">
        <label>
          PAN Card Number:
          <input type="text" name="pan_card_number" value="{currentUser.data.pan_card_number}" readonly />
        </label>
        <!-- <label>
          Name:
          <input type="text" name="name" value="{currentUser.data.name}" readonly />
        </label> -->
        <label for="name">Name</label>
        <input type="text" id="name" name="name" value="{currentUser.data.name}" />
        <label for="age">Age</label>
        <input type="number" id="age" name="age" />
      </div>
    </div>
  
    <!-- Personal Details -->
    <div class="card">
      <div class="card-header">
        Personal Details
      </div>
      <div class="card-content">
        <label>
          Gender:
          <input type="text" name="gender" value="{currentUser.data.gender}" readonly />
        </label>
        <label>
          Date of Birth:
          <input type="text" name="date_of_birth" value="{currentUser.data.date_of_birth}" readonly />
        </label>
        <label>
          Address:
          <input type="text" name="address" value="{currentUser.data.address}" readonly />
        </label>
        <label>
          Pincode:
          <input type="text" name="pincode" value="{currentUser.data.pincode}" readonly />
        </label>
        <div class="note">
          Note: You cannot edit the above details as they are already verified through Digilocker.
        </div>
      </div>
    </div>
  
    <!-- KYC Details -->
    <div class="card">
      <div class="card-header">
        KYC Details <span class="edit">Edit</span>
      </div>
      <div class="card-content">
        <label>
          Email:
          <input type="email" name="email" value="{currentUser.data.email}" />
        </label>
        <label>
          Marital Status:
          <input type="text" name="marital_status" value="{currentUser.data.marital_status}" />
        </label>
        <label>
          Annual Income:
          <input type="text" name="annual_income" value="{currentUser.data.annual_income}" />
        </label>
        <label>
          Father's Name:
          <input type="text" name="father_name" value="{currentUser.data.father_name}" />
        </label>
        <label>
          Mother's Name:
          <input type="text" name="mother_name" value="{currentUser.data.mother_name}" />
        </label>
      </div>
    </div>
  
    <!-- Documents -->
    <div class="card">
      <div class="card-header">
        Documents <span class="edit">Edit</span>
      </div>
      <div class="documents">
        <label>
          Photo:
          <input type="file" name="documents_photo" />
        </label>
        <label>
          PAN Card:
          <input type="file" name="documents_pan_card" />
        </label>
        <label>
          Signature:
          <input type="file" name="documents_signature" />
        </label>
      </div>
    </div>
  
    <!-- Terms and Buttons -->
    <div class="terms">
      <label>
        <input type="checkbox" name="terms" required /> I agree to the <a href="#">Terms & Conditions</a>
      </label>
    </div>
    <div class="buttons">
      <button type="submit" class="next-btn">Submit</button>
      <button type="reset" class="skip-btn">Reset</button>
    </div>
  </form>
</KycFlowLayout>


<style>
    .container {
      height: 100%;
      max-width: 600px;
      margin: auto;
      font-family: Arial, sans-serif;
      padding: 20px;
    background-color: white;
    }
  
    .card {
      background: white;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      margin-bottom: 15px;
      padding: 15px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
  
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 16px;
      font-weight: bold;
      margin-bottom: 10px;
    }
  
    .card-header .edit {
      font-size: 14px;
      color: #007bff;
      cursor: pointer;
    }
  
    .card-content p {
      margin: 5px 0;
      font-size: 14px;
      line-height: 1.5;
    }
  
    .note {
      font-size: 12px;
      color: #888;
      margin-top: 10px;
      background: #f1f1f1;
      padding: 10px;
      border-radius: 4px;
    }
  
    .documents {
      display: flex;
      gap: 10px;
    }
  
    .document-placeholder {
      flex: 1;
      height: 80px;
      border: 2px dashed #d0d0d0;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      color: #888;
    }
  
    .terms {
      margin: 15px 0;
      font-size: 14px;
    }
  
    .terms a {
      color: #007bff;
      text-decoration: none;
    }
  
    .buttons {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
  
    .next-btn {
      background-color: #004680;
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 14px;
      cursor: pointer;
      border-radius: 4px;
    }
  
    .skip-btn {
      font-size: 14px;
      color: #555;
      background: none;
      border: none;
      cursor: pointer;
      text-decoration: underline;
    }
  </style>